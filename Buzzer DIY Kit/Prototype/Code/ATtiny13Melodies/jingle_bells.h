#ifndef JINGLE_BELLS
#define JINGLE_BELLS

#include "config.h"

#define TONE_FREQ (F_CPU / (2 * 1024))
#define F(x) (TONE_FREQ / x - 1)

#define NOTE_A3 F(220)
#define NOTE_Fb4 F(370)
#define NOTE_E4 F(330)
#define NOTE_D4 F(294)
#define NOTE_B3 F(247)
#define NOTE_G4 F(392)
#define NOTE_Cb4 F(277)
#define NOTE_A4 F(440)
#define NOTE_B4 F(494)
#define NOTE_Gb4 F(415)
#define NOTE_Db4 F(311)
#define NOTE_Cb5 F(554)

#define DURATION_0 0
#define DURATION_870 1
#define DURATION_360 2
#define DURATION_750 3
#define DURATION_240 4
#define DURATION_990 5
#define DURATION_630 6
#define DURATION_120 7
#define DURATION_510 8

const uint16_t melody_durations[] PROGMEM = {
  0, // 0
  875, // 1
  375, // 2
  750, // 3
  250, // 4
  1000, // 5
  625, // 6
  129, // 7
  500, // 8
};

typedef uint16_t melody_data;

const melody_data melody[294] PROGMEM = {
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_630,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_750,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_630,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_510 << 5) | DURATION_510,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_240,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_360 << 5) | DURATION_630,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_630,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_750,
  (NOTE_A3 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_A3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_630,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_510 << 5) | DURATION_510,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_240,
  (NOTE_G4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_G4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_D4 << 10) | (DURATION_360 << 5) | DURATION_630,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_630,
  (NOTE_B3 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Db4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B3 << 10) | (DURATION_0 << 5) | DURATION_750,
  (NOTE_B3 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_B3 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_630,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Cb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Cb5 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_510 << 5) | DURATION_510,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_A4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_0 << 5) | DURATION_240,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_360,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_360,
  (NOTE_Fb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_870,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_240,
  (NOTE_A4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_Gb4 << 10) | (DURATION_0 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_B4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_A4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_Fb4 << 10) | (DURATION_120 << 5) | DURATION_120,
  (NOTE_E4 << 10) | (DURATION_0 << 5) | DURATION_990,
};

#define MELODY_SIZE sizeof(melody) / sizeof(melody_data)
#define MELODY_TONE(x) ((pgm_read_word(&melody[x]) >> 10) & 0x3f)
#define MELODY_NO_TONE_DURATION(x) pgm_read_word(&melody_durations[(pgm_read_word(&melody[x]) >> 5) & 0x1F])
#define MELODY_DURATION(x) pgm_read_word(&melody_durations[pgm_read_word(&melody[x]) & 0x1F])

void tone(uint8_t frequency)
{
  if (frequency <= 0) {
    buzzerOff();
    OCR0A = 0;
  } else {
    buzzerOn();
    TCCR0B = (1 << WGM02) | (1 << CS02) | (0 << CS01) | (1 << CS00);
    OCR0A = frequency;
  }
}

#endif